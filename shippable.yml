language: java
jdk: openjdk9

branches:
  only:
    - master

env:
  global:
    - BALLERINA_VERSION=0.975.0
    - DISTRIBUTION_NAME=ballerina-platform-$BALLERINA_VERSION
    - DOCKER_REPO="btest"
    - DOCKER_ACC=pizak # replace with your Docker Hub account name    

build:
  ci:
    - pushd $HOME
    - wget https://product-dist.ballerina.io/downloads/$BALLERINA_VERSION/$DISTRIBUTION_NAME.zip
    - unzip $DISTRIBUTION_NAME.zip
    - export PATH=$PATH:$HOME/$DISTRIBUTION_NAME/bin
    - popd
    - ballerina version
    - ballerina build btest
    - ballerina test btest
    
  post_ci:
    - docker push pizak/btest
#    - docker push gcr.io/kubernetes-project-198621/btest
    
    
integrations:
  hub:
    - integrationName: docker-registry 
      type: dockerRegistryLogin

#    - integrationName: gcloud
#      type: gcloudKey